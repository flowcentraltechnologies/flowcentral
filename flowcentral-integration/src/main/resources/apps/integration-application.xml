<?xml version="1.0"?>
<!-- Integration application -->
<application name="integration"
	description="$m{integration.short.description}" label="$m{integration.label}"
	module="integration">
	<!-- Widget Types -->
	<widgetTypes>
		<widgetType name="configendpointlist"
			description="$m{integration.widgettype.configendpointlist}" dataType="string"
			inputType="string"
			editor="!ui-select list:endpointlist listParams:$l{endpointType} blankOption:$m{blank.none}"
			renderer="!ui-label" />
		<widgetType name="endpointreaderlist"
			description="$m{integration.widgettype.endpointreaderlist}" dataType="string"
			inputType="string"
			editor="!ui-select list:endpointreaderlist blankOption:$m{blank.none}"
			renderer="!ui-label" />
		<widgetType name="readeventprocessorlist"
			description="$m{integration.widgettype.readeventprocessorlist}" dataType="string"
			inputType="string"
			editor="!ui-select list:readeventprocessorlist blankOption:$m{blank.none}"
			renderer="!ui-label" />
		<widgetType name="readconfigprocessorrulelist"
			description="$m{integration.widgettype.readconfigprocessorrulelist}" dataType="string"
			inputType="string"
			editor="!ui-select list:rulelist listParams:$l{eventProcessor} blankOption:$m{blank.none}"
			renderer="!ui-label" />
	</widgetTypes>
	<!-- Applets -->
	<applets>
		<applet name="manageEndpointConfig"
			description="$m{integration.endpointconfig.manage}"
			label="$m{integration.endpointconfig.manage.label}" icon="network-wired"
			type="manage_entitylist" entity="endpointConfig" menuAccess="true">
			<property name="searchTable" value="endpointConfigTable" />
			<property name="searchTable.new" value="true" />
			<property name="searchTable.report" value="true" />
			<property name="searchTable.quickFilter" value="true" />
			<property name="createForm" value="endpointConfigForm" />
			<property name="createForm.save" value="true" />
			<property name="createForm.save.next" value="true" />
			<property name="createForm.save.close" value="true" />
			<property name="maintainForm" value="endpointConfigForm" />
			<property name="maintainForm.update" value="true" />
			<property name="maintainForm.delete" value="true" />
		</applet>
		<applet name="manageReadConfig"
			description="$m{integration.readconfig.manage}"
			label="$m{integration.readconfig.manage.label}" icon="vector-square"
			type="manage_entitylist" entity="readConfig" menuAccess="true">
			<property name="searchTable" value="readConfigTable" />
			<property name="searchTable.new" value="true" />
			<property name="searchTable.report" value="true" />
			<property name="searchTable.quickFilter" value="true" />
			<property name="createForm" value="readConfigForm" />
			<property name="createForm.save" value="true" />
			<property name="createForm.save.next" value="true" />
			<property name="createForm.save.close" value="true" />
			<property name="maintainForm" value="readConfigForm" />
			<property name="maintainForm.update" value="true" />
			<property name="maintainForm.delete" value="true" />
		</applet>
	</applets>
	<!-- References -->
	<references>
		<reference name="endpointConfigRef"
			description="$m{integration.endpointconfig.reference}" entity="endpointConfig"
			searchField="description" />
		<reference name="readConfigRef"
			description="$m{integration.readconfig.reference}" entity="readConfig"
			searchField="description" />
	</references>
	<!-- Entities -->
	<entities>
		<entity name="endpointConfig" description="$m{integration.endpointconfig}"
			label="$m{integration.endpointconfig.label}"
			type="com.flowcentraltech.flowcentral.integration.entities.EndpointConfig" auditable="true"
			reportable="true">
			<field name="endpointType" label="$m{integration.endpointconfig.endpointtype}"
				type="enum_ref" references="endpointtypelist"
				inputWidget="application.enumlist" />
			<field name="name" label="$m{integration.endpointconfig.name}" type="string"
				inputWidget="application.name" maxLen="64"/>
			<field name="description" label="$m{integration.endpointconfig.description}"
				type="string" inputWidget="application.text" maxLen="96" />
			<field name="endpoint" label="$m{integration.endpointconfig.endpoint}"
				type="string" inputWidget="configendpointlist" maxLen="64"/>
			<field name="endpointTypeDesc" label="$m{integration.endpointconfig.endpointtypedesc}"
				type="list_only" key="endpointType" property="description" />
			<uniqueConstraint name="nameUc"
				description="$m{integration.endpointconfig.uc.name}"
				fieldList="name" />
			<uniqueConstraint name="descUc"
				description="$m{integration.endpointconfig.uc.description}"
				fieldList="description" />
		</entity>
		<entity name="readConfig" description="$m{integration.readconfig}"
			label="$m{integration.readconfig.label}"
			type="com.flowcentraltech.flowcentral.integration.entities.ReadConfig" auditable="true"
			reportable="true">
			<field name="name" label="$m{integration.readconfig.name}" type="string"
				inputWidget="application.name"  maxLen="32"/>
			<field name="description" label="$m{integration.readconfig.description}"
				type="string" inputWidget="application.text" maxLen="64" />
			<field name="endpointReader" label="$m{integration.readconfig.endpointreader}"
				type="string" inputWidget="endpointreaderlist" maxLen="64" />
			<field name="endpointReaderPeriod" label="$m{integration.readconfig.endpointreaderperiod}"
				type="integer" inputWidget="application.integer" precision="3" />
			<field name="endpointMaxLoadingSize" label="$m{integration.readconfig.endpointmaxloadingsize}"
				type="integer" inputWidget="application.integer" precision="4"/>
			<field name="eventProcessor" label="$m{integration.readconfig.eventprocessor}"
				type="string" inputWidget="readeventprocessorlist" maxLen="64"/>
			<field name="processorRule" label="$m{integration.readconfig.processorrule}"
				type="string" inputWidget="readconfigprocessorrulelist" maxLen="64" nullable = "true"/>
			<uniqueConstraint name="nameUc"
				description="$m{integration.readconfig.uc.name}"
				fieldList="name" />
			<uniqueConstraint name="descUc"
				description="$m{integration.readconfig.uc.description}"
				fieldList="description" />
		</entity>
	</entities>
	<!-- Tables -->
	<tables>
		<table name="endpointConfigTable"
			description="$m{integration.endpointconfig.table}"
			label="$m{integration.endpointconfig.table.label}" entity="endpointConfig"
			itemsPerPage="20">
			<column field="name" renderWidget="application.name"
				widthRatio="1"  linkAct="maintainAct"/>
			<column field="description" renderWidget="application.text"
				widthRatio="1" />
			<column field="endpoint" renderWidget="application.text"
				widthRatio="1" />
			<column field="endpointTypeDesc" renderWidget="application.text"
				label="$m{integration.endpointconfig.endpointtype}" widthRatio="1" />
		</table>
		<table name="readConfigTable"
			description="$m{integration.readconfig.table}"
			label="$m{integration.readconfig.table.label}" entity="readConfig"
			itemsPerPage="20">
			<column field="name" renderWidget="application.name"
				widthRatio="1" linkAct="maintainAct" />
			<column field="description" renderWidget="application.text"
				widthRatio="1" />
			<column field="endpointReader" renderWidget="application.text"
				widthRatio="1" />
			<column field="endpointReaderPeriod" renderWidget="application.text"
				widthRatio="1" />
			<column field="endpointMaxLoadingSize" renderWidget="application.text"
				widthRatio="1" />
			<column field="eventProcessor" renderWidget="application.text"
				widthRatio="1" />
			<column field="statusDesc" renderWidget="application.text"
				label="$m{integration.readconfig.status}" widthRatio="1" />
		</table>
	</tables>
	<!-- Forms -->
	<forms>
		<form name="endpointConfigForm"
			description="$m{integration.endpointconfig.form}" entity="endpointConfig">
			<tab name="basicDetails"
				label="$m{integration.endpointconfig.form.basicdetails}" contentType="miniform">
				<section name="endpointConfigDetails" columns="type_2">
					<field name="name" column="0" required="true" />
					<field name="description" column="0" required="true" />
					<field name="endpointType" column="1" required="true" switchOnChange="true"/>
					<field name="endpoint" column="1" required="true"
						switchOnChange="true" />
					<field name="status" column="1" required="true" />
				</section>
			</tab>
			<tab name="endpointParams" label="$m{integration.endpointconfig.form.parameters}"
				reference="endpoint-paramconfigprovider" contentType="param_values" />
			<tab name="changeLog" label="$m{application.form.audit}"
				contentType="miniform_changelog" />
		</form>
		<form name="readConfigForm"
			description="$m{integration.readconfig.form}" entity="readConfig">
			<tab name="basicDetails"
				label="$m{integration.readconfig.form.basicdetails}" contentType="miniform">
				<section name="readConfigDetails" columns="type_2">
					<field name="name" column="0" required="true" />
					<field name="description" column="0" required="true" />
					<field name="endpointReaderPeriod" column="0" required="true" />
					<field name="endpointMaxLoadingSize" column="0" required="true" />
					<field name="endpointReader" column="1" required="true" switchOnChange="true"/>
					<field name="eventProcessor" column="1" required="true" switchOnChange="true"/>
					<field name="processorRule" column="1" />
					<field name="status" column="1" required="true" />
				</section>
			</tab>
			<tab name="readerParams" label="$m{integration.readconfig.form.parameters}"
				reference="endpointreader-paramconfigprovider" contentType="param_values" />
			<tab name="changeLog" label="$m{application.form.audit}"
				contentType="miniform_changelog" />
		</form>
	</forms>
</application>