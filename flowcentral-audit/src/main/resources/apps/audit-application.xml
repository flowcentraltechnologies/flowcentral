<?xml version="1.0"?>
<!-- Audit application -->
<application name="audit"
	description="$m{audit.short.description}" label="$m{audit.label}"
	module="audit">
	<!-- Widget Types -->
	<widgetTypes>
		<widgetType name="entityauditsnapshotviewer"
			description="$m{audit.widgettype.entityauditsnapshotviewer}"
			dataType="long" inputType="long" editor="!fc-entityauditsnapshotview"
			renderer="!ui-label" />
		<widgetType name="entityauditconfigsearch"
			description="$m{audit.widgettype.entityauditconfigsearch}"
			dataType="string" inputType="string"
			editor="!fc-entitysearch ref:$s{audit.entityAuditConfigRef} listKey:$s{name}"
			renderer="!ui-label" />
		<widgetType name="auditeventtypelist"
			description="$m{audit.widgettype.auditeventtypelist}"
			dataType="string" inputType="string"
			editor="!ui-select list:auditeventtypelist listParams:$l{entity} blankOption:$m{blank.none}"
			renderer="!ui-label" />
		<widgetType name="auditableentitysearch"
			description="$m{audit.widgettype.auditableentitysearch}"
			dataType="string" inputType="string"
			editor="!fc-entitysearch ref:$s{application.appEntityAuditableRef} listKey:$s{longName}"
			renderer="!ui-label" />
		<widgetType name="entityauditablefielddeflist"
			description="$m{audit.widgettype.entityauditablefielddeflist}"
			dataType="string" inputType="string"
			editor="!ui-select list:entityauditablefielddeflist listParams:$l{entity} blankOption:$m{blank.none}"
			renderer="!ui-label" />
		<widgetType name="entityauditsearchfielddeflist"
			description="$m{audit.widgettype.entityauditsearchfielddeflist}"
			dataType="string" inputType="string"
			editor="!ui-select list:entityauditsearchfielddeflist listParams:$l{entity} blankOption:$m{blank.none}"
			renderer="!ui-label" />
	</widgetTypes>
	<!-- Applets -->
	<applets>
		<applet name="entityAuditSearch"
			description="$m{audit.entityaudit.entityauditsearch}"
			label="$m{audit.entityaudit.entityauditsearch.label}" icon="search"
			type="manage_entitylist" entity="entityAuditKeys" menuAccess="true"
			allowSecondaryTenants="true">
			<property name="searchTable" value="entityAuditKeysTable" />
			<property name="searchTable.new" value="false" />
			<property name="searchTable.report" value="true" />
			<property name="searchTable.quickFilter" value="true" />
			<property name="searchTable.basicSearchOnly" value="true" />
			<property name="searchTable.searchInput"
				value="entityKeysSearchInput" />
			<property name="maintainForm" value="entityAuditKeysForm" />
			<property name="maintainForm.update" value="false" />
			<property name="maintainForm.delete" value="false" />
		</applet>
		<applet name="manageEntityAuditConfig"
			description="$m{audit.entityauditconfig.manage}"
			label="$m{audit.entityauditconfig.manage.label}" icon="cogs"
			type="manage_entitylist" entity="entityAuditConfig" menuAccess="true"
			allowSecondaryTenants="true">
			<property name="searchTable" value="entityAuditConfigTable" />
			<property name="searchTable.new" value="true" />
			<property name="searchTable.report" value="true" />
			<property name="searchTable.quickFilter" value="true" />
			<property name="searchTable.basicSearchOnly" value="true" />
			<property name="createForm" value="entityAuditConfigForm" />
			<property name="createForm.save" value="true" />
			<property name="createForm.save.next" value="true" />
			<property name="createForm.save.close" value="true" />
			<property name="maintainForm" value="entityAuditConfigForm" />
			<property name="maintainForm.update" value="true" />
			<property name="maintainForm.delete" value="true" />
		</applet>
	</applets>
	<!-- References -->
	<references>
		<reference name="entityAuditConfigRef"
			description="$m{audit.entityauditconfig.reference}"
			entity="entityAuditConfig" searchField="description" />
		<reference name="entityAuditDetailsRef"
			description="$m{audit.entityauditdetails.reference}"
			entity="entityAuditDetails" />
		<reference name="entityAuditKeysRef"
			description="$m{audit.entityauditkeys.reference}"
			entity="entityAuditKeys" />
		<reference name="entityAuditSnapshotRef"
			description="$m{audit.entityauditsnapshot.reference}"
			entity="entityAuditSnapshot" />
	</references>
	<!-- Entities -->
	<entities>
		<entity name="entityAuditConfig"
			description="$m{audit.entityauditconfig}"
			label="$m{audit.entityauditconfig.label}"
			type="com.flowcentraltech.flowcentral.audit.entities.EntityAuditConfig"
			reportable="true">
			<field name="sourceType"
				label="$m{audit.entityauditconfig.sourcetype}" type="enum_ref"
				references="auditsourcetypelist" inputWidget="application.enumlist" />
			<field name="name" label="$m{audit.entityauditconfig.name}"
				type="string" inputWidget="application.name" basicSearch="true" />
			<field name="description"
				label="$m{audit.entityauditconfig.description}" type="string"
				inputWidget="application.text" basicSearch="true" />
			<field name="entity" label="$m{audit.entityauditconfig.entity}"
				type="string" inputWidget="auditableentitysearch" basicSearch="true" />
			<field name="searchFieldA"
				label="$m{audit.entityauditconfig.searchfielda}" type="string"
				inputWidget="entityauditsearchfielddeflist" nullable="true" />
			<field name="searchFieldB"
				label="$m{audit.entityauditconfig.searchfieldb}" type="string"
				inputWidget="entityauditsearchfielddeflist" nullable="true" />
			<field name="searchFieldC"
				label="$m{audit.entityauditconfig.searchfieldc}" type="string"
				inputWidget="entityauditsearchfielddeflist" nullable="true" />
			<field name="searchFieldD"
				label="$m{audit.entityauditconfig.searchfieldd}" type="string"
				inputWidget="entityauditsearchfielddeflist" nullable="true" />
			<field name="sourceTypeDesc"
				label="$m{audit.entityauditconfig.sourcetypedesc}" type="list_only"
				key="sourceType" property="description" />
			<uniqueConstraint name="nameUc"
				description="$m{audit.entityauditconfig.uc.name}" fieldList="name">
			</uniqueConstraint>
			<uniqueConstraint name="descUc"
				description="$m{audit.entityauditconfig.uc.description}"
				fieldList="description">
			</uniqueConstraint>
		</entity>
		<entity name="entityAuditDetails"
			description="$m{audit.entityauditdetails}"
			label="$m{audit.entityauditdetails.label}"
			type="com.flowcentraltech.flowcentral.audit.entities.EntityAuditDetails"
			reportable="true">
			<field name="eventType"
				label="$m{audit.entityauditdetails.eventtype}" type="enum_ref"
				references="auditeventtypelist" inputWidget="application.enumlist" />
			<field name="entityId"
				label="$m{audit.entityauditdetails.entityid}" type="long" />
			<field name="eventTimestamp"
				label="$m{audit.entityauditdetails.eventtimestamp}"
				type="timestamp_utc" inputWidget="application.datetime" />
			<field name="auditNo"
				label="$m{audit.entityauditdetails.auditno}" type="string"
				inputWidget="application.text" />
			<field name="sourceName"
				label="$m{audit.entityauditdetails.sourcename}" type="string"
				inputWidget="application.text" />
			<field name="userLoginId"
				label="$m{audit.entityauditdetails.userloginid}" type="string"
				inputWidget="application.text" />
			<field name="userName"
				label="$m{audit.entityauditdetails.username}" type="string"
				inputWidget="application.text" />
			<field name="userIpAddress"
				label="$m{audit.entityauditdetails.useripaddress}" type="string"
				inputWidget="application.text" />
			<field name="roleCode"
				label="$m{audit.entityauditdetails.rolecode}" type="string"
				inputWidget="application.text" />
			<field name="eventTypeDesc"
				label="$m{audit.entityauditdetails.eventtypedesc}" type="list_only"
				key="eventType" property="description" />
		</entity>
		<entity name="entityAuditKeys"
			description="$m{audit.entityauditkeys}"
			label="$m{audit.entityauditkeys.label}"
			type="com.flowcentraltech.flowcentral.audit.entities.EntityAuditKeys"
			reportable="true">
			<field name="entityAuditConfigId"
				label="$m{audit.entityauditdetails.entityauditconfigid}" type="ref"
				inputLabel="$m{audit.entityauditdetails.entityauditconfig}"
				inputWidget="application.entitysearch"
				references="entityAuditConfigRef" basicSearch="true" />
			<field name="entityAuditDetailsId"
				label="$m{audit.entityauditkeys.entityauditdetailsid}" type="ref"
				inputLabel="$m{audit.entityauditkeys.entityauditdetails}"
				inputWidget="application.entitylist"
				references="entityAuditDetailsRef" basicSearch="true" />
			<field name="keyA" label="$m{audit.entityauditkeys.keya}"
				type="string" inputWidget="application.text" />
			<field name="keyB" label="$m{audit.entityauditkeys.keyb}"
				type="string" inputWidget="application.text" />
			<field name="keyC" label="$m{audit.entityauditkeys.keyc}"
				type="string" inputWidget="application.text" />
			<field name="keyD" label="$m{audit.entityauditkeys.keyd}"
				type="string" inputWidget="application.text" />
			<field name="entity" label="$m{audit.entityauditkeys.entity}"
				type="list_only" key="entityAuditConfigId" property="entity" />
			<field name="auditConfigName"
				label="$m{audit.entityauditkeys.auditconfigname}" type="list_only"
				key="entityAuditConfigId" property="name" />
			<field name="auditConfigDesc"
				label="$m{audit.entityauditkeys.auditconfigdesc}" type="list_only"
				key="entityAuditConfigId" property="description" />
			<field name="entityId"
				label="$m{audit.entityauditkeys.entityid}" type="list_only"
				key="entityAuditDetailsId" property="entityId" />
			<field name="eventType"
				label="$m{audit.entityauditkeys.eventtype}" type="list_only"
				key="entityAuditDetailsId" property="eventType" />
			<field name="eventTimestamp"
				label="$m{audit.entityauditkeys.eventtimestamp}" type="list_only"
				key="entityAuditDetailsId" property="eventTimestamp" />
			<field name="auditNo" label="$m{audit.entityauditkeys.auditno}"
				type="list_only" key="entityAuditDetailsId" property="auditNo" />
			<field name="sourceName"
				label="$m{audit.entityauditkeys.sourcename}" type="list_only"
				key="entityAuditDetailsId" property="sourceName" />
			<field name="userLoginId"
				label="$m{audit.entityauditkeys.userloginid}" type="list_only"
				key="entityAuditDetailsId" property="userLoginId" />
			<field name="userName"
				label="$m{audit.entityauditkeys.username}" type="list_only"
				key="entityAuditDetailsId" property="userName" />
			<field name="userIpAddress"
				label="$m{audit.entityauditkeys.useripaddress}" type="list_only"
				key="entityAuditDetailsId" property="userIpAddress" />
			<field name="roleCode"
				label="$m{audit.entityauditkeys.rolecode}" type="list_only"
				key="entityAuditDetailsId" property="roleCode" />
			<field name="eventTypeDesc"
				label="$m{audit.entityauditkeys.eventtypedesc}" type="list_only"
				key="entityAuditDetailsId" property="eventTypeDesc" />
			<searchInput description="Entity Audit Search Input"
				name="entityKeysSearchInput"
				restrictionResolver="entityaudit-searchrestrictionresolver">
				<input field="f:auditConfigName" label="Audit Configuration"
					type="EQUALS" widget="audit.entityauditconfigsearch" />
				<input field="f:eventType" label="Event Type" type="EQUALS"
					widget="audit.auditeventtypelist" />
				<input field="f:key" label="Data" type="LIKE"
					widget="application.text" />
			</searchInput>
		</entity>
		<entity name="entityAuditSnapshot"
			description="$m{audit.entityauditsnapshot}"
			label="$m{audit.entityauditsnapshot.label}"
			type="com.flowcentraltech.flowcentral.audit.entities.EntityAuditSnapshot"
			reportable="true">
			<field name="entityAuditDetailsId"
				label="$m{audit.entityauditsnapshot.entityauditdetailsid}"
				type="ref"
				inputLabel="$m{audit.entityauditsnapshot.entityauditdetails}"
				inputWidget="application.entitylist"
				references="entityAuditDetailsRef" basicSearch="true" />
			<field name="snapshot"
				label="$m{audit.entityauditsnapshot.snapshot}" type="clob"
				inputWidget="application.textarea" />
		</entity>
	</entities>
	<!-- Tables -->
	<tables>
		<table name="entityAuditConfigTable"
			description="$m{audit.entityauditconfig.table}"
			label="$m{audit.entityauditconfig.table.label}"
			entity="entityAuditConfig" itemsPerPage="20" serialNo="true"
			basicSearch="true">
			<column field="name" renderWidget="application.name"
				widthRatio="1" linkAct="maintainAct" />
			<column field="description" renderWidget="application.text"
				widthRatio="1" />
			<column field="entity" renderWidget="application.text"
				widthRatio="1" />
			<column field="sourceTypeDesc" renderWidget="application.text"
				label="$m{audit.entityauditconfig.sourcetype}" widthRatio="1" />
			<column field="statusDesc" renderWidget="application.text"
				label="$m{basestatusentity.field.label.status}" widthRatio="1" />
			<column field="createDt" renderWidget="application.datetime"
				widthRatio="1" />
			<column field="updateDt" renderWidget="application.datetime"
				widthRatio="1" />
		</table>
		<table name="entityAuditKeysTable"
			description="$m{audit.entityauditkeys.table}"
			label="$m{audit.entityauditkeys.table.label}"
			entity="entityAuditKeys" itemsPerPage="20" serialNo="true"
			basicSearch="true">
			<column field="auditNo" renderWidget="application.name"
				widthRatio="1" linkAct="maintainAct" />
			<column field="auditConfigDesc"
				renderWidget="application.text"
				label="$m{audit.entityauditkeys.auditconfig}" widthRatio="1" />
			<column field="userLoginId" renderWidget="application.text"
				widthRatio="1" />
			<column field="userName" renderWidget="application.text"
				widthRatio="1" />
			<column field="keyA" renderWidget="application.text"
				widthRatio="1" />
			<column field="keyB" renderWidget="application.text"
				widthRatio="1" />
			<column field="keyC" renderWidget="application.text"
				widthRatio="1" />
			<column field="keyD" renderWidget="application.text"
				widthRatio="1" />
			<column field="eventTypeDesc" renderWidget="application.text"
				label="$m{audit.entityauditkeys.eventtype}" widthRatio="1" />
			<column field="eventTimestamp"
				renderWidget="application.datetime" widthRatio="1" order="DESC" />
		</table>
	</tables>
	<!-- Forms -->
	<forms>
		<form name="entityAuditConfigForm"
			description="$m{audit.entityauditconfig.form}"
			entity="entityAuditConfig">
			<tab name="basicDetails"
				label="$m{audit.entityauditconfig.form.basicdetails}"
				contentType="miniform">
				<section name="entityAuditConfigDetails" columns="type_2">
					<field name="name" inputWidget="application.name" column="0"
						required="true" />
					<field name="description" inputWidget="application.text"
						column="0" required="true" />
					<field name="sourceType" column="0" required="true" />
					<field name="entity" column="1" switchOnChange="true"
						required="true" />
					<field name="searchFieldA" column="1" />
					<field name="searchFieldB" column="1" />
					<field name="searchFieldC" column="1" />
					<field name="searchFieldD" column="1" />
					<field name="status" column="1" required="true" />
				</section>
			</tab>
			<tab name="changeLog" label="$m{application.form.audit}"
				contentType="miniform_changelog" />
		</form>
		<form name="entityAuditKeysForm"
			description="$m{audit.entityauditkeys.form}" entity="entityAuditKeys">
			<tab name="basicDetails"
				label="$m{audit.entityauditkeys.form.basicdetails}"
				contentType="miniform">
				<section name="configDetails" columns="type_2"
					label="$m{audit.entityauditkeys.form.section.configdetails}">
					<field name="auditConfigDesc" column="0" required="true"
						label="$m{audit.entityauditkeys.auditconfig}" />
					<field name="entity" column="1" required="true" />
				</section>
				<section name="keyDetails" columns="type_4"
					label="$m{audit.entityauditkeys.form.section.keydetails}">
					<field name="keyA" column="0" />
					<field name="keyB" column="1" />
					<field name="keyC" column="2" />
					<field name="keyD" column="3" />
				</section>
				<section name="eventDetails" columns="type_4"
					label="$m{audit.entityauditkeys.form.section.eventdetails}">
					<field name="auditNo" column="0" required="true" />
					<field name="sourceName" column="0" required="true" />
					<field name="eventTypeDesc" column="1" required="true"
						label="$m{audit.entityauditkeys.eventtype}" />
					<field name="eventTimestamp" column="1" required="true" />
					<field name="userLoginId" column="2" required="true" />
					<field name="userName" column="2" required="true" />
					<field name="userIpAddress" column="3" required="true" />
					<field name="roleCode" column="3"/>
				</section>
				<section name="snapshotDetails" columns="type_1"
					label="$m{audit.entityauditkeys.form.section.snapshotdetails}">
					<field name="id" column="0" required="true"
						label="$m{audit.entityauditkeys.form.snapshot}"
						inputWidget="entityauditsnapshotviewer" />
				</section>
			</tab>
		</form>
	</forms>
</application>